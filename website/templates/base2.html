  <!--
File: base2.html

Purpose:
Defines the foundational HTML structure for a dynamic Flask-based web application. 
1. Navbar: Includes links for authenticated and non-authenticated users, supporting dynamic highlighting for the current page.
2. Flash Messages: Displays success or error notifications.
3. Styles and Scripts: Integrates Bootstrap, FontAwesome, and project-specific resources.
4. Content Blocks: Supports dynamic page content, title, styles, and scripts via Flask's Jinja2 template blocks.

Key Features:
- Responsive design for cross-device compatibility.
- Fixed navbar to improve navigation.
- Auto-dismiss feature for flash messages.
- Modular structure for seamless page extensions.
-->

  <!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8" />
      <!-- Specifies character encoding for the document -->
      
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <!-- Ensures proper scaling and responsiveness for different screen sizes -->

      <style>
        /* General styles for the body and navbar */
        body {
          padding-top: 70px; 
          /* Adds padding to prevent content from overlapping the fixed navbar */
        }

        .navbar {
          z-index: 1000; 
          /* Ensures the navbar stays above other content */
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          /* Makes the navbar span the full width of the viewport */
        }

        /* Styling for secondary buttons, typically disabled */
        .btn-secondary {
          background-color: grey;
          color: white;
          cursor: not-allowed;
          border: none;
          padding: 8px 16px;
          text-align: center;
          font-size: 14px;
        }
      </style>

      <style>
        /* Styling for general buttons */
        button {
          font-family: inherit;
          font-size: 20px;
          background: royalblue;
          color: white;
          padding: 0.9em 1.5em;
          border: none;
          border-radius: 16px;
          overflow: hidden;
          transition: all 0.2s;
          cursor: pointer;
          position: relative;
          width: 180px; 
        }

        /* Button hover effects */
        button span {
          margin-left: 0.3em;
          transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        button:hover span {
          transform: translateX(0.3em); 
        }
        button svg {
          margin-right: 0.5em;
          transition: transform 0.3s ease-in-out;
        }
        button:hover svg {
          transform: rotate(20deg); 
        }
      </style>

      <!-- External stylesheets -->
      <link
        rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        crossorigin="anonymous"
      />
      <!-- Bootstrap CSS for responsive and pre-designed components -->

<<<<<<< HEAD
      <link
        rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        crossorigin="anonymous"
      />
      <!-- Font Awesome for icons -->

      <link rel="stylesheet" href="{{ url_for('static', filename='available_books.css') }}">
      <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
      <!-- Internal project-specific stylesheets -->

      <title>{% block title %}Home{% endblock %}</title>
      <!-- Title block for dynamic page titles -->
    </head>
    <body>
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        
        <div class="collapse navbar-collapse justify-content-center" id="navbar">
            <ul class="navbar-nav">
                {% if current_user.is_authenticated %}
                <!-- Common Links for All Logged-In Users -->
                {% if request.path != '/' %}
                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/' %}active{% endif %}" id="home" href="/">Home</a>
                </li>
                {% endif %}
                {% if request.path != '/book-list' %}
                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/book-list' %}active{% endif %}" id="availableBooks" href="/book-list">Available Books</a>
                </li>
                {% endif %}
                {% if request.path != '/search-books' %}
                <a class="nav-link {% if request.path == '/search-books' %}active{% endif %}" href="/search-books">Search Books</a>
                {% endif %}
            
                <!-- Admin-Specific Link -->
                {% if current_user.is_admin %}
                {% if request.path != '/add-book' %}
                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/add-book' %}active{% endif %}" id="addBook" href="/add-book">Add Book</a>
                </li>
                {% if request.path != '/manage_users' %}
                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/manage_users' %} active{%endif%}" href="/manage_users">Manage Users</a>
                </li>
                
                {% endif %}
                
                {% endif %}
                {% if request.path != '/track-user-activity' %}
                <li class="nav-item">
                  <a class="nav-link" id="trackUserActivity" href="{{ url_for('views.track_user_activity') }}">Track User Activity</a>
                </li>
                {% endif %}
      
                {% if current_user.is_admin %}
  <li class="nav-item">
    <a class="nav-link {% if request.path == '/reports' %}active{% endif %}" href="/reports">
        Report
    </a> 
  </li>
  {% endif %}

  <li class="nav-item">
    <a class="nav-link" id="logout" href="/logout">Logout</a>
  </li>
  {% endif %}

  <!-- User-Specific Link -->
  {% if not current_user.is_admin %}
  {% if request.path != '/manage_users' %}
                {% if request.path != '/profile_information' %}
                <li class="nav-item">
                    <a class="nav-link {% if request.path == '/profile_information' %}active{% endif %}" id="profile_information" href="profile_information">Profile Information</a>
                </li>
                
                {% endif %}
                
                {% endif %}

  {% if request.path != '/contact-us' %}
  <li class="nav-item">
    <a class="nav-link {% if request.path == '/contact-us' %}active{% endif %}" id="contact_us" href="/contact-us">Contact Us</a>
  </li>
  <li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle" href="#" id="messagesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Messages
      {% if unread_count > 0 %}
          <span class="badge badge-danger">{{ unread_count }}</span>
      {% endif %}
  </a>
  <div class="dropdown-menu dropdown-menu-right" aria-labelledby="messagesDropdown">
      {% for message in user_messages %}
          <a class="dropdown-item {{ 'font-weight-bold' if not message.is_read }}" href="/message/{{ message.id }}">
              {{ message.content[:50] }}... <small>{{ message.timestamp.strftime('%b %d, %Y') }}</small>
          </a>
      {% endfor %}
      {% if user_messages|length == 0 %}
          <span class="dropdown-item text-muted">No messages</span>
      {% endif %}
  </div>
  </li>
  {% endif %}
  {% if request.path != '/my-books' %}
  <li class="nav-item">
  <a class="nav-link {% if request.path == '/my-books' %}active{% endif %}" id="myBooks" href="/my-books">My Books</a>
  </li>
  {% endif %}
  {% if request.path != '/recommended-books' %}
  <li class="nav-item">
  <a class="nav-link {% if request.path == '/recommended-books' %}active{% endif %}" id="recommendedBooks" href="{{ url_for('views.recommendations') }}">Recommended Books</a>
  </li>
  <li class="nav-item">
  {% if request.path != '/search-books' %}
  <a class="nav-link {% if request.path == '/search-books' %}active{% endif %}" href="/search-books">Search Books</a>
  {% endif %}
  </li>
  {% endif %}
  <li class="nav-item">
    <a class="nav-link" id="logout" href="/logout">Logout</a>
  </li>
  {% endif %}
  {% else %}
  <!-- Links for Non-Authenticated Users -->
  {% if request.path != '/login' %}
  <li class="nav-item">
      <a class="nav-link {% if request.path == '/login' %}active{% endif %}" id="login" href="/login">Login</a>
  </li>
  {% endif %}
  {% if request.path != '/sign-up' %}
  <li class="nav-item">
      <a class="nav-link {% if request.path == '/sign-up' %}active{% endif %}" id="signUp" href="/sign-up">Sign Up</a>
  </li>
  {% endif %}
  {% endif %}
  </ul>
  </div>

  </nav>
=======
    <title>{% block title %}Home{% endblock %}</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-center" id="navbar">
            <ul class="navbar-nav">
                {% if current_user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/' %}active{% endif %}" id="home" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/book-list' %}active{% endif %}" id="availableBooks" href="/book-list">Available Books</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/search-books' %}active{% endif %}" id="searchBooks" href="/search-books">Search Books</a>
                    </li>
                    {% if not current_user.is_admin %}
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/contact-us' %}active{% endif %}" id="contact_us" href="/contact-us">Contact Us</a>
                    </li>
                    {% endif %}
                    <li class="nav-item">
                        <a class="nav-link" id="logout" href="/logout">Logout</a>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/login' %}active{% endif %}" id="login" href="/login">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/sign-up' %}active{% endif %}" id="signUp" href="/sign-up">Sign Up</a>
                    </li>
                {% endif %}
            </ul>
        </div>
    </nav>
    
  
  
  
<style>
  #flash-messages {
    position: fixed;
    top: 70px; /* Adjust based on navbar height */
    left: 50%;
    transform: translateX(-50%);
    z-index: 1050;
    width: 50%; /* Adjust width as needed */
    max-width: 600px;
    text-align: center;
}
>>>>>>> 03edd5c3082998ed70a6ba6db7ebb680f8f8b3f4

      <style>
        /* Flash message container styles */
        #flash-messages {
          position: fixed;
          top: 70px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 1050;
          width: 50%;
          max-width: 600px;
          text-align: center;
        }

        /* Flash message styles for success and error categories */
        .alert-success {
          background-color: #d4edda;
          color: #155724;
        }
        .alert-error {
          background-color: #f8d7da;
          color: #721c24;
        }
      </style>

      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      <div id="flash-messages">
        {% for category, message in messages %}
        <div class="alert alert-{{ 'success' if category == 'success' else 'error' }} alert-dismissable">
          {{ message }}
          <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        </div>
        {% endfor %}
      </div>
      {% endif %}
      {% endwith %}

      <div class="container">{% block content %}{% endblock %}</div>
      <!-- Main content container -->

      <!-- JavaScript dependencies -->
      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

      {% block javascript %}
      <script>
        // Automatically dismiss flash messages after 3 seconds
        document.addEventListener('DOMContentLoaded', () => {
          setTimeout(() => {
            const alerts = document.querySelectorAll("#flash-messages .alert");
            alerts.forEach(alert => {
              alert.style.opacity = "0";
              setTimeout(() => alert.remove(), 600);
            });
          }, 3000);
        });
      </script>
      {% endblock %}

      <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    </body>
  </html>